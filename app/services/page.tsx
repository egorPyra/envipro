'use client'

import { useEffect, useRef } from 'react'
import ServiceBlock from '../components/ServiceBlock/ServiceBlock'
import Header from '../components/Header/Header'
import styles from './page.module.css'

export default function AboutUs() {
  const containerRef = useRef<HTMLDivElement>(null)
  const scrollRef = useRef<HTMLDivElement>(null)

  useEffect(() => {
    const container = containerRef.current!
    const scroll = scrollRef.current!
    const slides = Array.from(scroll.children) as HTMLElement[]
    const total = slides.length
    let current = 0

    // вместо lastTime / performance.now() — флаг троттлинга
    let isThrottled = false
    const THROTTLE_DURATION = 1500 // мс между перелистыванием

    // обновление позиции
    const updatePos = () => {
      scroll.style.top = `-${current * 90}vh`
    }

    // единичная обработка колеса
    const onWheel = (e: WheelEvent) => {
      e.preventDefault()
      if (isThrottled) return      // если ещё «заторможены» — игнорируем

      // помечаем «занятость»
      isThrottled = true
      setTimeout(() => { isThrottled = false }, THROTTLE_DURATION)

      // проверка внутреннего скролла, если нужно
      const el = slides[current]
      if (el.classList.contains('neverwillrun')) {
        const atTop = el.scrollTop === 0
        const atBottom = el.scrollTop + el.clientHeight >= el.scrollHeight
        if ((e.deltaY < 0 && !atTop) || (e.deltaY > 0 && !atBottom)) {
          return
        }
      }

      // одно шаговое перелистывание
      if (e.deltaY > 0 && current < total - 1) current++
      else if (e.deltaY < 0 && current > 0) current--
      else return

      updatePos()
    }

    // подключаем слушатель
    container.addEventListener('wheel', onWheel, { passive: false })

    // начальные стили для scroll-контейнера
    scroll.style.position = 'absolute'
    scroll.style.top = '0'
    scroll.style.left = '0'
    scroll.style.width = '100%'

    return () => {
      container.removeEventListener('wheel', onWheel)
    }
  }, [])

  return (
    <main className={styles.main}>
      <Header />

      <div ref={containerRef} className={styles.verticalMagnet}>
        <div ref={scrollRef} className={styles.magnetScroll}>
          <ServiceBlock
            id="monitoring"
            title="Экологический мониторинг"
            text={`Мы занимаемся экологическим мониторингом уже более 10 лет, оценивая изменения в природной среде, вызванные воздействием различных объектов как на суше, так и во внутренних морских водах России. `}
            list={`Наши услуги охватывают: \n- Мониторинг атмосферного воздуха, атмосферных осадков и льда; \n- Исследование природных вод, донных отложений и почвы;   \n- Наблюдение за геологическими процессами; \n- Оценку состояния растительного и животного мира, а также водных биоресурсов; \n- Исследования физических факторов воздействия и радиологический мониторинг`}
            secondText={`Мы используем современное оборудование и располагаем обширной лабораторной базой, что позволяет нам гарантировать высокое качество, оперативность и достоверность результатов. Наши специалисты обеспечивают комплексный подход к экологическому мониторингу, помогая минимизировать воздействие на окружающую среду и соблюдать все нормативные требования.`}
            bottomText="Доверьтесь нашему опыту, и мы поможем вам сохранить природные ресурсы и обеспечить экологическую безопасность ваших проектов."
            imageLeft="/ServiceBlock/monitoringLeft.png"
            imageRight="/ServiceBlock/monitoringRight.png" color={""} />

          <ServiceBlock
            id="ecoShadow"
            title="Производственный экологический контроль"
            text={`Мы осуществляем инспекционный контроль ваших объектов, предоставляя полную и достоверную информацию о соответствии вашей деятельности природоохранным требованиям. `}
            list={`Наши услуги включают:  \n- Проверку соблюдения экологических норм и проектных решений; \n- Контроль выполнения природоохранных мероприятий; \n- Проверку наличия и актуальности разрешительной документации; \n- Аналитический контроль на источниках выбросов загрязняющих веществ 
в атмосферный воздух и сбросов в водные объекты.  `}
            secondText={`По итогам проверки вы получите подробный отчет с анализом выявленных нарушений и рекомендациями по их устранению. Это поможет вам своевременно устранять несоответствия, минимизировать риски и избежать штрафных санкций.`}
            bottomText="Доверьте экологический контроль профессионалам! Мы обеспечим соблюдение всех природоохранных требований, что позволит вам сосредоточиться на своих ключевых задачах, зная, что экологические риски находятся под контролем."
            imageLeft="/ServiceBlock/ecoShadow.jpg"
            imageRight="/ServiceBlock/ecoShadowRight.jpg" color={""} />

          <ServiceBlock
            id="ppa"
            title={`Разработка и \nсогласование \nприродоохранной \nразрешительной \nдокументации`}
            text={`Мы предлагаем комплексные услуги по разработке и согласованию природоохранной документации, обеспечивая полное соответствие вашего бизнеса требованиям законодательства`}
            list={`Наши услуги включают: \n- Постановку и актуализацию объектов на государственный учет объектов негативного воздействия (НВОС); \n- Разработку программ производственного экологического контроля (ПЭК); \n- Оформление паспортов опасных отходов; \n- Инвентаризацию источников выбросов загрязняющих веществ в атмосферный воздух; \n- Подготовку проектов расчетов допустимых выбросов (ПДВ) и нормативов допустимых сбросов (НДС); \n- Установление нормативов образования отходов и лимитов на их размещение; \n- Разработку мероприятий по уменьшению выбросов загрязняющих веществ в атмосферный воздух в периоды неблагоприятных метеорологических условий (НМУ); \n- Создание проектов санитарно-защитных зон (СЗЗ); \n- Подготовку отчетной документации.`}
            secondText={`Наши специалисты гарантируют качественную и своевременную подготовку документов, а также их согласование в соответствующих органах. Мы поможем вам минимизировать риски, избежать штрафов и обеспечить экологическую безопасность вашего бизнеса. `}
            bottomText="Доверьтесь профессионалам, чтобы сосредоточиться на развитии вашего бизнеса, зная, что все природоохранные вопросы находятся под контролем."
            imageLeft="/ServiceBlock/ppaLeft.jpg"
            imageRight="/ServiceBlock/ppaRight.jpg" color={"black"} size="2.5rem" />

          <ServiceBlock
            id="engineer"
            title={`Инженерные изыскания`}
            text={`ООО «ЭнвиПро» - ваш надежный партнер в инженерных изысканиях. Мы предлагаем комплексные решения в области инженерных изысканий, обеспечивая высокое качество и точность на всех этапах работы`}
            list={`Наши услуги включают: \n- Геодезические изыскания \n- точные измерения и анализ рельефа местности; \n- Геологические изыскания - изучение грунтов и геологических условий; \n- Гидрометеорологические изыскания - оценка водных ресурсов и климатических условий; \n- Экологические изыскания \n- анализ состояния окружающей среды и прогнозирование изменений под влиянием строительства.`}
            secondText={`Мы проводим полевые исследования, выполняем лабораторные анализы и готовим технические отчеты, которые соответствуют всем нормативным требованиям. Благодаря современному оборудованию и обширной лабораторной базе, мы гарантируем оперативность, достоверность и высокое качество результатов.`}
            bottomText="ООО «ЭнвиПро» - это команда профессионалов, которая поможет вам подготовить проектную документацию для объектов любой сложности. Доверьтесь нам, и мы обеспечим успешную реализацию вашего проекта!"
            imageLeft="/ServiceBlock/engineerLeft.jpg"
            imageRight="/ServiceBlock/engineerRight.jpg" color={"white"} />

          <ServiceBlock
            id="earth"
            title={`Недропользование`}
            text={`Мы предлагаем полный спектр услуг в сфере недропользования, обеспечивая профессиональное сопровождение на всех этапах работы.`}
            list={`Наши услуги включают:  
- Подготовку документации для получения лицензий на право пользования недрами;  
- Разработку проектов геологического изучения недр и выполнение соответствующих работ;  
- Создание проектов геологоразведочных работ;  
- Оценку и переоценку запасов полезных ископаемых и подземных вод;  
- Проведение гидрогеологических исследований и гидрогеологического моделирования;  
- Подготовку технических проектов разработки полезных ископаемых. `}
            secondText={`Наша команда специалистов обеспечивает полное сопровождение и согласование документации в органах исполнительной власти, что позволяет минимизировать сроки и риски при реализации проектов. Мы гарантируем высокое качество услуг, основанное на многолетнем опыте и использовании современных технологий.`}
            bottomText="Доверьтесь нам, и мы поможем вам эффективно и законно использовать природные ресурсы, обеспечивая успешное выполнение ваших задач в области недропользования. "
            imageLeft="/ServiceBlock/earthLeft.jpg"
            imageRight="/ServiceBlock/earthRight.jpg" color={"white"} />

          <ServiceBlock
            id="ecology"
            title={`Экологическое сопровождение деятельности`}
            text={`Мы предоставляем комплексное экологическое сопровождение для компаний, помогая решать задачи в области охраны окружающей среды. `}
            list={`Наши услуги включают:  
- Подготовку полного комплекта необходимой экологической документации;  
- Организацию первичного учета в области обращения с отходами производства 
и потребления, выбросами в атмосферный воздух и сбросами в водные объекты;  
- Подготовку и сдачу статистической отчетности;  
- Разработку и оформление декларации по плате за негативное воздействие 
на окружающую среду (НВОС);  
- Консультации и решения для сложных задач природоохранного характера.  `}
            secondText={`Пока наши специалисты берут на себя все заботы, связанные с экологическим сопровождением, вы можете сосредоточиться на своих ключевых задачах или просто отдохнуть, зная, что все процессы находятся под контролем профессионалов.`}
            bottomText="Мы гарантируем соблюдение всех экологических норм и требований, минимизируя риски и оптимизируя процессы вашей компании."
            imageLeft="/ServiceBlock/ecologyLeft.jpg"
            imageRight="/ServiceBlock/ecologyRight.jpg" color={"#363636"} />

          <ServiceBlock
            id="doocumentation"
            title={`Разработка проектной документации`}
            text={`Мы предлагаем комплексные услуги по разработке проектной документации, обеспечивая экологическую безопасность и соблюдение всех нормативных требований. `}
            list={`Наши услуги включают:  
- Проведение оценки воздействия на окружающую среду (ОВОС) намечаемой хозяйственной деятельности;  
- Организацию и участие в общественных обсуждениях;  
- Разработку раздела "Мероприятия по охране окружающей среды" (МООС) в составе проектной документации; 
- Полное сопровождение проекта при прохождении Государственной экологической экспертизы и Государственной строительной экспертизы.`}
            secondText={`Наши специалисты обладают большим опытом в разработке и согласовании проектной документации, а их высокая квалификация позволяет достигать необходимых результатов в кратчайшие сроки.`}
            bottomText="Когда мы берем на себя все этапы разработки и согласования, вы можете быть уверены в успешном завершении проекта и сосредоточиться на своих ключевых задачах"
            imageLeft="/ServiceBlock/AntonLeft.jpg"
            imageRight="/ServiceBlock/documentationRight.jpg" color={"#363636"} />

          <ServiceBlock
            id="geo"
            title={`Геодезия и картография`}
            text={`Мы предлагаем широкий спектр услуг в области геодезии, картографии и геоинформационных систем (ГИС), обеспечивая высокую точность и качество результатов. `}
            list={`Наши услуги включают:  
- Создание геодезических сетей;  
- Топографическую съемку различных масштабов, включая съемку подземных коммуникаций и подготовку дендропланов;  
- Гидрографические исследования, в том числе с использованием гидролокатора 
бокового обзора (ГБО);  
- Разработку и выполнение программ геотехнического мониторинга;  
- Аэрофотосъемку территорий с использованием беспилотных летательных аппаратов (БПЛА);  
- Создание картографических продуктов в геоинформационных системах (ГИС) 
с использованием передовых программных решений ESRI и MapInfo;  
- Разработку точных картографических решений и фотопланов для экологических, геологических и лесохозяйственных задач;  
- Картографирование экологических нарушений.  `}
            secondText={`Мы используем современное оборудование и программное обеспечение, что позволяет нам оперативно и качественно решать задачи любой сложности. Специалисты компании обладают богатым опытом в создании картографических продуктов, которые помогают нашим клиентам принимать обоснованные решения и эффективно управлять территориями. `}
            bottomText="Доверьтесь профессионалам, и мы обеспечим вас надежными данными и решениями 
для успешной реализации ваших проектов. "
            imageLeft="/ServiceBlock/geoLeft.jpg"
            imageRight="/ServiceBlock/geoRight.jpg" color={"black"} />

          <ServiceBlock
            id="save"
            title={`Сохранение биологического разнообразия`}
            text={`ООО «ЭнвиПро» обладает богатым опытом реализации проектов, направленных 
на сохранение и восстановление биологического разнообразия. Мы предлагаем полный комплекс услуг, начиная от исследований биоразнообразия территорий и заканчивая сохранением и воспроизводством редких и охраняемых видов.`}
            list={`Наши услуги включают:  
- Получение разрешений на добывание объектов растительного и животного мира, занесенных в Красную книгу Российской Федерации и регионов;  
- Оформление разрешений на использование объектов растительного и животного мира, произрастающих на особо охраняемых природных территориях (ООПТ) федерального значения;  
- Пересадку краснокнижных видов растений и животных;  
- Выполнение компенсационных посадок краснокнижных видов растений;  
- Разработку программ мониторинга и сохранения биологического разнообразия;  
- Реализацию комплекса мероприятий, предусмотренных такими программами. `}
            secondText={`За годы работы мы отловили и пересадили сотни особей редких животных, тысячи краснокнижных растений и произвели компенсационные высадки десятков тысяч редких и охраняемых видов деревьев.`}
            bottomText="Мы гордимся своим вкладом в сохранение природы и готовы предложить вам профессиональные решения для реализации экологических проектов любой сложности. Доверьтесь нам, и мы поможем сохранить уникальное биоразнообразие для будущих поколений.  "
            imageLeft="/ServiceBlock/saveLeft.jpg"
            imageRight="/ServiceBlock/saveRight.jpg" color={""} />

          <ServiceBlock
            id="forest"
            title={`лесопользование`}
            text={`Мы обеспечиваем полный комплекс лесохозяйственных работ, начиная от разработки проектов освоения лесов и заканчивая выполнением рубки, очистки участков и лесовосстановлением. `}
            list={`Наши услуги включают:  
- Проведение дендрологического обследования территории и составление перечетных ведомостей древесно-кустарниковой растительности;  
- Выявление деревьев, угрожающих падением;  
- Разработку и согласование проектов освоения лесов;  
- Подготовку и подачу лесных деклараций и отчетов об использовании лесов;  
- Получение разрешений на рубку;  
- Выполнение каблинга, рубки, обрезки и кронирования деревьев, в том числе 
с использованием профессиональных арбористов;  
- Очистку лесных участков от валежной древесины;  
- Расчистку участков от древесно-кустарниковой растительности;  
- Вывоз и утилизацию древесины;  
- Лесовосстановление.  `}
            secondText={`Мы обладаем широким опытом выполнения работ в сложных условиях, включая горные районы Кавказа и особо охраняемые природные территории (ООПТ) федерального значения. Наши специалисты успешно реализовали проекты при строительстве и эксплуатации горнолыжных курортов, обеспечивая соблюдение всех экологических и законодательных требований. 
              Обращаясь к нам, вы получаете:  
- Оформление всех необходимых разрешительных документов;  
- Выполнение работ в кратчайшие сроки;  
- Профессиональный подход и гарантию качества`}
            bottomText="Доверьтесь нам, и мы поможем вам эффективно управлять лесными ресурсами, минимизируя воздействие на окружающую среду.  "
            imageLeft="/ServiceBlock/forestLeft.jpg"
            imageRight="/ServiceBlock/forestRight.jpg" color={""} />
        </div>
      </div>
    </main>
  )
}

"use client";

import { useState } from "react";
import { AnimatePresence, motion } from "framer-motion";
import styles from "./ServiceBlock.module.css";

type Service = {
  id: string;
  title: string;
  text: string;
  list: string;
  secondText: string;
  bottomText: string;
  image: string;
};

const defaultServices: Service[] = [
  {
    id: "monitoring",
    title: "Экологический мониторинг",
    text:
      "Мы занимаемся экологическим мониторингом уже более 10 лет, оценивая изменения в природной среде, вызванные воздействием различных объектов как на суше, так и во внутренних морских водах России. ",
    list:
      "Наши услуги охватывают: \n- Мониторинг атмосферного воздуха, атмосферных осадков и льда; \n- Исследование природных вод, донных отложений и почвы;   \n- Наблюдение за геологическими процессами; \n- Оценку состояния растительного и животного мира, а также водных биоресурсов; \n- Исследования физических факторов воздействия и радиологический мониторинг ",
    secondText:
      "Мы используем современное оборудование и располагаем обширной лабораторной базой, что позволяет нам гарантировать высокое качество, оперативность и достоверность результатов. Наши специалисты обеспечивают комплексный подход к экологическому мониторингу, помогая минимизировать воздействие на окружающую среду и соблюдать все нормативные требования.",
    bottomText:
      "Доверьтесь нашему опыту, и мы поможем вам сохранить природные ресурсы и обеспечить экологическую безопасность ваших проектов.",
    image: "/ServiceBlock/monitoringRight.png",
  },
  {
    id: "ecoShadow",
    title: "Производственный экологический контроль",
    text:
      "Мы осуществляем инспекционный контроль ваших объектов, предоставляя полную и достоверную информацию о соответствии вашей деятельности природоохранным требованиям. ",
    list:
      "Наши услуги включают:  \n- Проверку соблюдения экологических норм и проектных решений; \n- Контроль выполнения природоохранных мероприятий; \n- Проверку наличия и актуальности разрешительной документации; \n- Аналитический контроль на источниках выбросов загрязняющих веществ в атмосферный воздух и сбросов в водные объекты.",
    secondText:
      "По итогам проверки вы получите подробный отчет с анализом выявленных нарушений и рекомендациями по их устранению. Это поможет вам своевременно устранять несоответствия, минимизировать риски и избежать штрафных санкций.",
    bottomText:
      "Доверьте экологический контроль профессионалам! Мы обеспечим соблюдение всех природоохранных требований, что позволит вам сосредоточиться на своих ключевых задачах, зная, что экологические риски находятся под контролем.",
    image: "/ServiceBlock/ecoShadowRight.jpg",
  },
  {
    id: "ppa",
    title: "Разработка и \nсогласование \nприродоохранной \nразрешительной \nдокументации",
    text:
      "Мы предлагаем комплексные услуги по разработке и согласованию природоохранной документации, обеспечивая полное соответствие вашего бизнеса требованиям законодательства",
    list:
      "Наши услуги включают: \n- Постановку и актуализацию объектов на государственный учет объектов негативного воздействия (НВОС); \n- Разработку программ производственного экологического контроля (ПЭК); \n- Оформление паспортов опасных отходов; \n- Инвентаризацию источников выбросов загрязняющих веществ в атмосферный воздух; \n- Подготовку проектов расчетов допустимых выбросов (ПДВ) и нормативов допустимых сбросов (НДС); \n- Установление нормативов образования отходов и лимитов на их размещение; \n- Разработку мероприятий по уменьшению выбросов загрязняющих веществ в атмосферный воздух в периоды неблагоприятных метеорологических условий (НМУ); \n- Создание проектов санитарно-защитных зон (СЗЗ); \n- Подготовку отчетной документации.",
    secondText:
      "Наши специалисты гарантируют качественную и своевременную подготовку документов, а также их согласование в соответствующих органах. Мы поможем вам минимизировать риски, избежать штрафов и обеспечить экологическую безопасность вашего бизнеса.",
    bottomText:
      "Доверьтесь профессионалам, чтобы сосредоточиться на развитии вашего бизнеса, зная, что все природоохранные вопросы находятся под контролем.",
    image: "/ServiceBlock/ppaRight.jpg",
  },
  {
    id: "engineer",
    title: "Инженерные изыскания",
    text:
      "ООО «ЭнвиПро» - ваш надежный партнер в инженерных изысканиях. Мы предлагаем комплексные решения в области инженерных изысканий, обеспечивая высокое качество и точность на всех этапах работы",
    list:
      "Наши услуги включают: \n- Геодезические изыскания \n- точные измерения и анализ рельефа местности; \n- Геологические изыскания - изучение грунтов и геологических условий; \n- Гидрометеорологические изыскания - оценка водных ресурсов и климатических условий; \n- Экологические изыскания \n- анализ состояния окружающей среды и прогнозирование изменений под влиянием строительства.",
    secondText:
      "Мы проводим полевые исследования, выполняем лабораторные анализы и готовим технические отчеты, которые соответствуют всем нормативным требованиям. Благодаря современному оборудованию и обширной лабораторной базе, мы гарантируем оперативность, достоверность и высокое качество результатов.",
    bottomText:
      "ООО «ЭнвиПро» - это команда профессионалов, которая поможет вам подготовить проектную документацию для объектов любой сложности. Доверьтесь нам, и мы обеспечим успешную реализацию вашего проекта!",
    image: "/ServiceBlock/engineerRight.jpg",
  },
  {
    id: "earth",
    title: "Недропользование",
    text:
      "Мы предлагаем полный спектр услуг в сфере недропользования, обеспечивая профессиональное сопровождение на всех этапах работы.",
    list:
      "Наши услуги включают:  \n - Подготовку документации для получения лицензий на право пользования недрами;  \n - Разработку проектов геологического изучения недр и выполнение соответствующих работ;  \n - Создание проектов геологоразведочных работ;  \n - Оценку и переоценку запасов полезных ископаемых и подземных вод;  \n- Проведение гидрогеологических исследований и гидрогеологического моделирования;  \n - Подготовку технических проектов разработки полезных ископаемых. ",
    secondText:
      "Наша команда специалистов обеспечивает полное сопровождение и согласование документации в органах исполнительной власти, что позволяет минимизировать сроки и риски при реализации проектов. Мы гарантируем высокое качество услуг, основанное на многолетнем опыте и использовании современных технологий.",
    bottomText:
      "Доверьтесь нам, и мы поможем вам эффективно и законно использовать природные ресурсы, обеспечивая успешное выполнение ваших задач в области недропользования.",
    image: "/ServiceBlock/earthRight.jpg",
  },
  {
    id: "ecology",
    title: "Экологическое сопровождение деятельности",
    text:
      "Мы предоставляем комплексное экологическое сопровождение для компаний, помогая решать задачи в области охраны окружающей среды. ",
    list:
      "Наши услуги включают:  \n - Подготовку полного комплекта необходимой экологической документации;  \n - Организацию первичного учета в области обращения с отходами производства и потребления, выбросами в атмосферный воздух и сбросами в водные объекты;  \n- Подготовку и сдачу статистической отчетности;  \n - Разработку и оформление декларации по плате за негативное воздействие на окружающую среду (НВОС);  \n - Консультации и решения для сложных задач природоохранного характера. ",
    secondText:
      "Пока наши специалисты берут на себя все заботы, связанные с экологическим сопровождением, вы можете сосредоточиться на своих ключевых задачах или просто отдохнуть, зная, что все процессы находятся под контролем профессионалов.",
    bottomText:
      "Мы гарантируем соблюдение всех экологических норм и требований, минимизируя риски и оптимизируя процессы вашей компании.",
    image: "/ServiceBlock/ecologyRight.jpg",
  },
  {
    id: "doocumentation",
    title: "Разработка проектной документации",
    text:
      "Мы предлагаем комплексные услуги по разработке проектной документации, обеспечивая экологическую безопасность и соблюдение всех нормативных требований. ",
    list:
      "Наши услуги включают:  \n- Проведение оценки воздействия на окружающую среду (ОВОС) намечаемой хозяйственной деятельности;  \n - Организацию и участие в общественных обсуждениях;  \n - Разработку раздела «Мероприятия по охране окружающей среды» (МООС) в составе проектной документации; \n - Полное сопровождение проекта при прохождении Государственной экологической экспертизы и Государственной строительной экспертизы.",
    secondText:
      "Наши специалисты обладают большим опытом в разработке и согласовании проектной документации, а их высокая квалификация позволяет достигать необходимых результатов в кратчайшие сроки.",
    bottomText:
      "Когда мы берем на себя все этапы разработки и согласования, вы можете быть уверены в успешном завершении проекта и сосредоточиться на своих ключевых задачах",
    image: "/ServiceBlock/documentationRight.jpg",
  },
  {
    id: "geo",
    title: "Геодезия и картография",
    text:
      "Мы предлагаем широкий спектр услуг в области геодезии, картографии и геоинформационных систем (ГИС), обеспечивая высокую точность и качество результатов.",
    list:
      "Наши услуги включают:  \n- Создание геодезических сетей;  \n - Топографическую съемку различных масштабов, включая съемку подземных коммуникаций и подготовку дендропланов;  \n - Гидрографические исследования, в том числе с использованием гидролокатора бокового обзора (ГБО);  \n - Разработку и выполнение программ геотехнического мониторинга;  \n - Аэрофотосъемку территорий с использованием беспилотных летательных аппаратов (БПЛА);  \n - Создание картографических продуктов в геоинформационных системах (ГИС) с использованием передовых программных решений ESRI и MapInfo;  \n - Разработку точных картографических решений и фотопланов для экологических, геологических и лесохозяйственных задач;  \n - Картографирование экологических нарушений.",
    secondText:
      "Мы используем современное оборудование и программное обеспечение, что позволяет нам оперативно и качественно решать задачи любой сложности. Специалисты компании обладают богатым опытом в создании картографических продуктов, которые помогают нашим клиентам принимать обоснованные решения и эффективно управлять территориями. ",
    bottomText:
      "Доверьтесь профессионалам, и мы обеспечим вас надежными данными и решениями для успешной реализации ваших проектов. ",
    image: "/ServiceBlock/geoRight.jpg",
  },
  {
    id: "save",
    title: "Сохранение биологического разнообразия",
    text:
      "ООО «ЭнвиПро» обладает богатым опытом реализации проектов, направленных на сохранение и восстановление биологического разнообразия. Мы предлагаем полный комплекс услуг, начиная от исследований биоразнообразия территорий и заканчивая сохранением и воспроизводством редких и охраняемых видов.",
    list:
      "Наши услуги включают:  \n- Получение разрешений на добывание объектов растительного и животного мира, занесенных в Красную книгу Российской Федерации и регионов;  \n - Оформление разрешений на использование объектов растительного и животного мира, произрастающих на особо охраняемых природных территориях (ООПТ) федерального значения;  \n - Пересадку краснокнижных видов растений и животных;  \n - Выполнение компенсационных посадок краснокнижных видов растений;  \n - Разработку программ мониторинга и сохранения биологического разнообразия;  \n- Реализацию комплекса мероприятий, предусмотренных такими программами. ",
    secondText:
      "За годы работы мы отловили и пересадили сотни особей редких животных, тысячи краснокнижных растений и произвели компенсационные высадки десятков тысяч редких и охраняемых видов деревьев. ",
    bottomText:
      "Мы гордимся своим вкладом в сохранение природы и готовы предложить вам профессиональные решения для реализации экологических проектов любой сложности. Доверьтесь нам, и мы поможем сохранить уникальное биоразнообразие для будущих поколений.  ",
    image: "/ServiceBlock/saveRight.jpg",
  },{
    id: "geo",
    title: "Лесопользование",
    text:
      "Мы обеспечиваем полный комплекс лесохозяйственных работ, начиная от разработки проектов освоения лесов и заканчивая выполнением рубки, очистки участков и лесовосстановлением. ",
    list:
      "Наши услуги включают:  \n - Проведение дендрологического обследования территории и составление перечетных ведомостей древесно-кустарниковой растительности;  \n- Выявление деревьев, угрожающих падением;  \n- Разработку и согласование проектов освоения лесов;  \n- Подготовку и подачу лесных деклараций и отчетов об использовании лесов;  \n- Получение разрешений на рубку;  \n - Выполнение каблинга, рубки, обрезки и кронирования деревьев, в том числе с использованием профессиональных арбористов;  \n- Очистку лесных участков от валежной древесины;  \n- Расчистку участков от древесно-кустарниковой растительности;  \n- Вывоз и утилизацию древесины;  \n- Лесовосстановление. ",
    secondText:
      "Мы обладаем широким опытом выполнения работ в сложных условиях, включая горные районы Кавказа и особо охраняемые природные территории (ООПТ) федерального значения. Наши специалисты успешно реализовали проекты при строительстве и эксплуатации горнолыжных курортов, обеспечивая соблюдение всех экологических и законодательных требований. \n Обращаясь к нам, вы получаете:  \n - Оформление всех необходимых разрешительных документов;  \n - Выполнение работ в кратчайшие сроки;  \n - Профессиональный подход и гарантию качества ",
    bottomText:
      "Доверьтесь нам, и мы поможем вам эффективно управлять лесными ресурсами, минимизируя воздействие на окружающую среду. ",
    image: "/ServiceBlock/forestRight.jpg",
  },
  
  
];

export default function ServiceBlock() {
  const services = defaultServices;
  const [openIndex, setOpenIndex] = useState(0);

  const handleToggle = (index: number) => {
    setOpenIndex((prev) => (prev === index ? -1 : index));
  };

  return (
    <section className={styles.section} aria-label="Услуги">
      {services.map((service, index) => {
        const isOpen = openIndex === index;
        return (
          <motion.article
            key={service.id}
            className={`${styles.card} ${isOpen ? styles.open : ""}`}
            initial={{ opacity: 0, y: 12 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.35, delay: index * 0.05 }}
          >
            <button
              type="button"
              className={styles.accordion}
              aria-expanded={isOpen}
              onClick={() => handleToggle(index)}
            >
              <span>{service.title}</span>
              <span
                className={`${styles.accordionMarker} ${isOpen ? styles.markerOpen : ""}`}
                aria-hidden="true"
              >
                <span />
                <span />
              </span>
            </button>

            <AnimatePresence initial={false}>
              {isOpen && (
                <motion.div
                  className={styles.panel}
                  aria-hidden="false"
                  initial={{ opacity: 0, height: 0 }}
                  animate={{ opacity: 1, height: "auto" }}
                  exit={{ opacity: 0, height: 0 }}
                  transition={{ duration: 0.4 }}
                  layout
                >
                  <div
                    className={styles.panelBg}
                    style={{ backgroundImage: `url(${service.image})` }}
                  />
                  <div className={styles.panelContent}>
                    {[
                      service.text,
                      service.list,
                      service.secondText,
                      service.bottomText,
                    ]
                      .filter(Boolean)
                      .map((paragraph, paragraphIndex) => (
                        <p className={styles.paragraph} key={`${service.id}-${paragraphIndex}`}>
                          {paragraph}
                        </p>
                      ))}
                  </div>
                </motion.div>
              )}
            </AnimatePresence>
          </motion.article>
        );
      })}
    </section>
  );
}
